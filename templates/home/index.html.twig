{% extends 'base.html.twig' %}

{% block left_side_bar %}
    <h2>Categorie</h2>
    <div class="panel-group category-products" id="accordian"><!--category-productsr-->
        <div class="panel panel-default">


            {% for item in menuItems %}
                <div class="panel-heading">
                    <h4 class="panel-title">
                        {% if item.childs is empty %}
                            <a href="#">{{ item.name }}</a></h4>
                        {% else %}
                            <a data-toggle="collapse" data-parent="#accordian" href="#{{item.name}}">
                                <span class="badge pull-right"><i class="fa fa-plus"></i></span>
                                {{ item.name }}
                            </a>
                        {% endif %}    
                    </h4>
                </div>

                {% if item.childs is not empty %}
                    <div id="{{item.name}}" class="panel-collapse collapse">
                        <div class="panel-body">
                            <ul>
                                {% for subitem in item.childs %}
                                    <li><a href="#">{{subitem.name}}</a></li>
                                {% endfor %}
                            </ul>
                        </div>
                    </div>
                {% endif %}


            {% endfor %}

            
        </div>
    </div><!--/category-products-->

    <div class="brands_products"><!--brands_products-->
        <h2>Marque</h2>
        <div class="brands-name">
            <ul class="nav nav-pills nav-stacked">
                {% for brand in brands %}
                    <li><a href="#"> <span class="pull-right">({{brand.quantity}})</span> {{brand.name}}</a></li>
                {% endfor %}
            </ul>
        </div>
    </div><!--/brands_products-->
    
    <div class="price-range"><!--price-range-->
        <h2>Prix</h2>
        <div class="well text-center">
                <input type="text" class="span2" value="" data-slider-min="0" data-slider-max="600" data-slider-step="5" data-slider-value="[250,450]" id="sl2" ><br />
                <b class="pull-left">0 €</b> <b class="pull-right">600 €</b>
        </div>
    </div><!--/price-range-->
    
    <div class="shipping text-center"><!--shipping-->
        <img src="{{ asset('eshopper/images/home/shipping.jpg') }}" alt="" />
    </div><!--/shipping-->

{% endblock %}


{% block main_container %}
    <div class="features_items"><!--features_items-->
        <h2 class="title text-center">Les meilleurs ventes</h2>
        
        {% for product in bests %}
        
            <div class="col-sm-4">
                <div class="product-image-wrapper">
                    <div class="single-products">
                            <div class="productinfo text-center">
                                <img src="{{ product.firstPhotoUrl}}" alt="{{ product.firstPhotoAlt}}" />
                                <h2>{{ product.price}}</h2>
                                <p>{{ product.name }}</p>
                        
                                <a href="#" class="btn btn-default add-to-cart"><i class="fa fa-shopping-cart"></i>Ajout au panier</a>
                            </div>
                            <div class="product-overlay">
                                <div class="overlay-content productinfo">
                                    <a href="{{ path('showProduct', {slug: product.slug}) }}">
                                        <img src="{{ product.firstPhotoUrl}}" alt="{{ product.firstPhotoAlt}}" />
                                        <h2>{{ product.price}}</h2>
                                        <p>{{ product.name }}</p>
                                    </a>
                                    <a href="#" class="btn btn-default add-to-cart"><i class="fa fa-shopping-cart"></i>Ajout au panier</a>
                                </div>
                            </div>
                    </div>
                    <div class="choose">
                        <ul class="nav nav-pills nav-justified">
                            <li><a href="#"><i class="fa fa-plus-square"></i>Ajout à la liste d'envie</a></li>
                            <li><a href="#"><i class="fa fa-plus-square"></i>Ajout au comparatif</a></li>
                        </ul>
                    </div>
                </div>
            </div>

        {% endfor %}
        
        
    </div><!--features_items-->
    
    <div class="category-tab"><!--category-tab-->
        <div class="col-sm-12">
            <ul class="nav nav-tabs">
                <li><a href="#{{ topCategory.name}}" data-toggle="tab">{{ topCategory.name }}</a></li>
                {% set myCount = 0 %}
                {% for subCat in topCategory.childs %}
                    <li class="{{ myCount == 0 ? "active" : "" }}"><a href="#{{ subCat.name}}" data-toggle="tab">{{ subCat.name }}</a></li>
                    {% set myCount = 1 %}
                {% endfor %}
            </ul>
        </div>
        <div class="tab-content">
            {% set myCount = 0 %}
            {% for subCat, products in topProducts %}
                 <div class="tab-pane fade {{ myCount == 0 ? "active" : "" }} in" id="{{ subCat }}">
                    {% set myCount = 1 %}
                    {% for pdt in products %}
                        <div class="col-sm-3">
                            <div class="product-image-wrapper">
                                <div class="single-products">
                                    <div class="productinfo text-center">
                                        <img src="{{ pdt.firstPhotoUrl}}" alt="{{ pdt.firstPhotoAlt}}" />
                                        <h2>{{ pdt.price}}</h2>
                                        <p>{{ pdt.name }}</p>
                                        <a href="#" class="btn btn-default add-to-cart"><i class="fa fa-shopping-cart"></i>Ajouter au panier</a>
                                    </div>
                                    
                                </div>
                            </div>
                        </div>
                    {% endfor %}
                 </div>
            {% endfor %}
            
        </div>
    </div><!--/category-tab-->
    
    <div class="recommended_items"><!--recommended_items-->
        <h2 class="title text-center">Les Produits recommandés</h2>
        
        <div id="recommended-item-carousel" class="carousel slide" data-ride="carousel">
            <div class="carousel-inner">
                
                    {% set myCount = 0 %}
                    {% for pdt in topLikeProducts %}

                        {% if myCount == 0 %} <div class="item active"> {% endif %} <!-- open first row and first div active --> 
                        {% if myCount == 3 %} </div><div class="item"> {% endif %} <!-- close row after 3 items start next row -->
                        {% set myCount = myCount + 1 %}
                        
                        <div class="col-sm-4">
                            <div class="product-image-wrapper">
                                <div class="single-products">
                                    <div class="productinfo text-center">
                                        <img src="{{ pdt.firstPhotoUrl}}" alt="{{ pdt.firstPhotoAlt}}" />
                                        <h2>{{ pdt.price}}</h2>
                                        <p>{{ pdt.name }}</p>
                                        <a href="#" class="btn btn-default add-to-cart"><i class="fa fa-shopping-cart"></i>Ajouter au panier</a>
                                    </div>
                                </div>
                            </div>
                        </div>

                    {% endfor %}	
                    </div> <!-- close first div if not open -->                    
                    
            </div>
                <a class="left recommended-item-control" href="#recommended-item-carousel" data-slide="prev">
                <i class="fa fa-angle-left"></i>
                </a>
                <a class="right recommended-item-control" href="#recommended-item-carousel" data-slide="next">
                <i class="fa fa-angle-right"></i>
                </a>			
        </div>
    </div><!--/recommended_items-->
					
{% endblock %}